version: "3.9"

services:
  owncloud:
    image: owncloud
    networks:
      - caddy
      - postgres
    deploy:
      labels:
        traefik.enable: "true"
        traefik.http.services.owncloud.loadbalancer.server.port: 80
        traefik.http.routers.owncloud.rule: Host(`owncloud.marcpartensky.com`)
        traefik.http.routers.owncloud.entrypoints: websecure
        traefik.http.routers.owncloud.tls.certresolver: tls

networks:
  caddy:
    external: true
  postgres:
    external: true
